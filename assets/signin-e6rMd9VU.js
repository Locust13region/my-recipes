import{u as B,a as D,b as L,r as s,s as M,j as e,C as N,T as m,c as v,L as y,M as O,l as U,d as q}from"./index-fNgYNFzZ.js";import{C as A}from"./Container-oSErNR0L.js";import{B as u}from"./Box-UTXH38QQ.js";import{B as I}from"./Button-bNABriEn.js";const z=()=>{var g,f,j;const a=B(),C=D(),d=L(),x=((f=(g=d.state)==null?void 0:g.from)==null?void 0:f.pathname)||"/",r=(j=d.state)==null?void 0:j.needAuth,[n,b]=s.useState(""),[o,S]=s.useState(""),[p,i]=s.useState(""),[h,l]=s.useState("");s.useEffect(()=>{r&&a(M(r))},[a,r]);const T=t=>{b(t.target.value),i("")},w=t=>{S(t.target.value),l("")},E=async t=>{if(t.preventDefault(),n)i("");else{i("Пожалуйста, введите имя пользователя");return}if(o)l("");else{l("Пожалуйста, введите пароль");return}const c=await a(U({email:n,password:o}));a(q(c.payload)),localStorage.setItem("_recipes",JSON.stringify(c.payload)),c.meta.requestStatus==="fulfilled"&&C(x,{replace:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{component:"main",maxWidth:"xs",className:"bg-link",children:[e.jsx(N,{}),e.jsxs(u,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(m,{component:"h1",variant:"h5",children:"Авторизация"}),e.jsxs(u,{component:"form",noValidate:!0,onSubmit:E,sx:{mt:1,px:2},children:[e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,label:"Ваше имя / email",name:"username",type:"email",variant:"standard",autoComplete:"username",value:n,error:!!p,helperText:p,onChange:T}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,label:"Пароль",name:"password",type:"password",variant:"standard",autoComplete:"current-password",value:o,error:!!h,helperText:h,onChange:w}),e.jsxs(u,{className:" mt-5 flex flex-col items-center text-amber-500 ",children:[e.jsx(I,{type:"submit",variant:"text",size:"large",color:"inherit",children:"Войти"}),x!=="/"?e.jsx(y,{to:"/",children:e.jsx(m,{variant:"body2",sx:{mt:1},children:"Вернуться на главную страницу"})}):null,e.jsx(y,{to:"/signup",children:e.jsx(m,{variant:"body2",sx:{mt:2,textDecoration:"underline"},children:"Зарегистрироваться"})})]})]})]})]}),e.jsx(O,{})]})};export{z as default};
